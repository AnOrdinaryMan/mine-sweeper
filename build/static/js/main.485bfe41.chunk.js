(window["webpackJsonpmine-sweeper"]=window["webpackJsonpmine-sweeper"]||[]).push([[0],{13:function(e,t,a){},14:function(e,t,a){},15:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(7),i=a.n(r),l=(a(13),a(1)),o=a(2),u=a(4),m=a(3),c=a(5),h=(a(14),function(e){function t(){var e;return Object(l.a)(this,t),(e=Object(u.a)(this,Object(m.a)(t).call(this))).restart=function(){e.init()},e.state={row:10,column:10,mineCount:10,table:[[]],flagCount:0,boomRow:-1,boomColumn:-1},e.timer=0,e}return Object(c.a)(t,e),Object(o.a)(t,[{key:"init",value:function(){var e=this,t=new Array(this.state.row).fill(null);t=t.map(function(){return new Array(e.state.column).fill(null)});for(var a=0;a<t.length;a++)for(var n=0;n<t[a].length;n++){var s=Object.create(null);s.selected=!1,s.hasMine=!1,s.hasFlag=!1,s.number=0,t[a][n]=s}for(var r=this.state.mineCount;r;){var i=Math.floor(Math.random()*this.state.row),l=Math.floor(Math.random()*this.state.column);t[i][l].hasMine||(t[i][l].hasMine=!0,r--)}for(var o=0;o<t.length;o++)for(var u=0;u<t[o].length;u++)if(!t[o][u].hasMine)for(var m=o-1;m<=o+1;m++)for(var c=u-1;c<=u+1;c++)m<0||m>=this.state.row||c<0||c>=this.state.column||t[m][c].hasMine&&(t[o][u].number+=1);this.setState({table:t,flagCount:0,boomRow:-1,boomColumn:-1},function(){console.log(e.state.table)})}},{key:"componentWillMount",value:function(){this.init()}},{key:"onRowChange",value:function(e){var t=this;if(isNaN(parseInt(e.target.value)))e.target.value="",document.getElementsByClassName("mine-sweeper-params-item-3-input")[0].value="1",this.setState({row:1,mineCount:1},function(){t.init()});else{if(parseInt(e.target.value)>99)return alert("\u884c\u6570\u4e0d\u80fd\u8d85\u8fc799\uff01"),void(e.target.value=parseInt(e.target.value.slice(0,2)));if(0===parseInt(e.target.value))return alert("\u884c\u6570\u4e0d\u80fd\u4e3a0\uff01"),e.target.value="",document.getElementsByClassName("mine-sweeper-params-item-3-input")[0].value="1",void this.setState({row:1,mineCount:1},function(){t.init()});if(String(parseInt(e.target.value)).length!==e.target.value.length)return void(e.target.value=parseInt(e.target.value));document.getElementsByClassName("mine-sweeper-params-item-3-input")[0].value="1",this.setState({row:parseInt(e.target.value),mineCount:1},function(){t.init()})}}},{key:"onColumnChange",value:function(e){var t=this;if(isNaN(parseInt(e.target.value)))e.target.value="",document.getElementsByClassName("mine-sweeper-params-item-3-input")[0].value="1",this.setState({column:1,mineCount:1},function(){t.init()});else{if(parseInt(e.target.value)>99)return alert("\u5217\u6570\u4e0d\u80fd\u8d85\u8fc799\uff01"),void(e.target.value=parseInt(e.target.value.slice(0,2)));if(0===parseInt(e.target.value))return alert("\u5217\u6570\u4e0d\u80fd\u4e3a0\uff01"),e.target.value="",document.getElementsByClassName("mine-sweeper-params-item-3-input")[0].value="1",void this.setState({row:1,mineCount:1},function(){t.init()});if(String(parseInt(e.target.value)).length!==e.target.value.length)return void(e.target.value=parseInt(e.target.value));document.getElementsByClassName("mine-sweeper-params-item-3-input")[0].value="1",this.setState({column:parseInt(e.target.value),mineCount:1},function(){t.init()})}}},{key:"onMineCountChange",value:function(e){var t=this;if(isNaN(parseInt(e.target.value)))e.target.value="",this.setState({mineCount:0},function(){t.init()});else{if(parseInt(e.target.value)>this.state.row*this.state.column)return alert("\u96f7\u6570\u4e0d\u80fd\u8d85\u8fc7\u683c\u5b50\u7684\u6570\u91cf("+this.state.row*this.state.column+")\uff01"),void(e.target.value=parseInt(e.target.value.slice(0,e.target.value.length-1)));if(String(parseInt(e.target.value)).length!==e.target.value.length){if("0"!==e.target.value[0])return void(e.target.value=parseInt(e.target.value));e.target.value=parseInt(e.target.value)}this.setState({mineCount:parseInt(e.target.value)},function(){t.init()})}}},{key:"ifWin",value:function(e){for(var t=0,a=0;a<e.length;a++)for(var n=0;n<e[a].length;n++)e[a][n].selected&&t++;return t===this.state.row*this.state.column-this.state.mineCount}},{key:"onTouchStart",value:function(e,t,a){var n=this;console.log(e,t);var s=this.state.table;this.timer=setTimeout(function(){!1===s[e][t].selected&&(s[e][t].hasFlag?n.setState({flagCount:n.state.flagCount-1}):n.setState({flagCount:n.state.flagCount+1}),s[e][t].hasFlag=!s[e][t].hasFlag),setTimeout(function(){n.setState({table:s})},500)},500)}},{key:"onTouchEnd",value:function(){clearTimeout(this.timer)}},{key:"onClick",value:function(e,t,a){console.log(e,t);var n=this.state.table;if(2===a.button)!1===n[e][t].selected&&(n[e][t].hasFlag?this.setState({flagCount:this.state.flagCount-1}):this.setState({flagCount:this.state.flagCount+1}),n[e][t].hasFlag=!n[e][t].hasFlag);else if(!1===n[e][t].selected&&!1===n[e][t].hasFlag)if(n[e][t].hasMine){for(var s=0;s<n.length;s++)for(var r=0;r<n[s].length;r++)n[s][r].hasFlag=!1,n[s][r].selected=!0;this.setState({boomRow:e,boomColumn:t}),setTimeout(function(){alert("\ud83d\udca3\ud83d\udca3\ud83d\udca3 Boom \uff01\uff01\uff01")})}else if(0===n[e][t].number?this.fastForward(e,t,n):n[e][t].selected=!0,this.ifWin(n)){for(var i=0;i<n.length;i++)for(var l=0;l<n[i].length;l++)n[i][l].hasFlag=!1,n[i][l].selected=!0;this.setState({flagCount:0}),setTimeout(function(){alert("\ud83d\udea9\ud83d\udea9\ud83d\udea9 Win \uff01\uff01\uff01")})}this.setState({table:n})}},{key:"fastForward",value:function(e,t,a){if(!a[e][t].hasMine&&!a[e][t].selected&&!a[e][t].hasFlag&&(a[e][t].selected=!0,0===a[e][t].number))for(var n=e-1;n<=e+1;n++)for(var s=t-1;s<=t+1;s++)n<0||n>=this.state.row||s<0||s>=this.state.column||this.fastForward(n,s,a)}},{key:"render",value:function(){var e=this,t=this.state.table.map(function(t,a){return s.a.createElement("div",{className:"mine-sweeper-row",key:"row"+a},t.map(function(t,n){return s.a.createElement("div",{className:t.selected?"mine-sweeper-item mine-sweeper-item-selected":"mine-sweeper-item",key:"row"+a+"-column"+n,onMouseUp:function(t){return e.onClick(a,n,t)},onTouchStart:function(t){return e.onTouchStart(a,n,t)},onTouchEnd:function(){return e.onTouchEnd()},style:a===e.state.boomRow&&n===e.state.boomColumn?{backgroundColor:"#F56C6C"}:null},t.hasFlag?"\ud83d\udea9":null,t.selected?t.hasMine?"\ud83d\udca3":s.a.createElement("span",{className:"mine-sweeper-item-number-"+t.number},0!==t.number?t.number:null):null)}))});return s.a.createElement("div",null,s.a.createElement("div",{className:"mine-sweeper-start"},s.a.createElement("span",{className:"mine-sweeper-start-btn",onClick:this.restart},"\u91cd\u65b0\u5f00\u59cb")),s.a.createElement("div",{className:"mine-sweeper-flagCount"},"\ud83d\udea9 X "+this.state.flagCount),s.a.createElement("div",{className:"mine-sweeper-params"},s.a.createElement("span",{className:"mine-sweeper-params-item mine-sweeper-params-item-1"},"\u884c\u6570\uff1a",s.a.createElement("input",{onChange:function(t){return e.onRowChange(t)},defaultValue:this.state.row})),s.a.createElement("span",{className:"mine-sweeper-params-item mine-sweeper-params-item-2"},"\u5217\u6570\uff1a",s.a.createElement("input",{onChange:function(t){return e.onColumnChange(t)},defaultValue:this.state.column})),s.a.createElement("span",{className:"mine-sweeper-params-item mine-sweeper-params-item-3"},"\u96f7\u6570\uff1a",s.a.createElement("input",{onChange:function(t){return e.onMineCountChange(t)},defaultValue:this.state.mineCount,className:"mine-sweeper-params-item-3-input"}))),s.a.createElement("div",{className:"mine-sweeper",onContextMenu:function(e){e.preventDefault()},style:{width:30*this.state.column,height:30*this.state.row}},t))}}]),t}(s.a.Component)),g=function(e){function t(){return Object(l.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement(h,null)}}]),t}(s.a.Component);i.a.render(s.a.createElement(g,null),document.getElementById("root"))},8:function(e,t,a){e.exports=a(15)}},[[8,1,2]]]);
//# sourceMappingURL=main.485bfe41.chunk.js.map